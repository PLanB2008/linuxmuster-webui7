<div class="modal-header">
    <h3>
    <span translate>Group Details</span>
    <span ng:show="groupDetails == null"> ...</span>
    <span ng:show="groupDetails != null"> - {{groupDetails['description']}}</span></h3>
</div>
<progress-spinner ng:show="groupDetails == null || changeState == true"></progress-spinner>
<div style="padding: 0 20px;" ng:show="groupDetails != null">
    <br />
    <h4 translate> Properties</h4>
    <table class="table">
        <tr>
            <td><b translate>Creationdate:</b></td>
            <td>{{formatDate(groupDetails['sophomorixCreationDate']) | date:'dd MMM yyyy - HH:mm:ss' }}</td>
        </tr>
        <tr>
            <td><b translate>Type:</b></td>
            <td>{{groupDetails['sophomorixType']}}</td>
        </tr>
        <tr>
            <td><b translate>Schoolname:</b></td>
            <td>{{groupDetails['sophomorixSchoolname']}}</td>
        </tr>
        <tr>
            <td><b translate>Sophomorix Status:</b></td>
            <td>{{groupDetails['sophomorixStatus']}}</td>
        </tr>
        <tr>
            <td><b translate>Joinable:</b></td>
            <td>
                <input type="checkbox" ng:model="joinable" ng:disabled="!editMembersButton" ng:change="changeJoin(groupName, groupDetails['sophomorixType'])"> </input>
            </td>
        </tr>
        <tr>
            <td><b translate>Hidden:</b></td>
            <td>
                <input type="checkbox" ng:model="hidden" ng:disabled="!editMembersButton" ng:change="changeHide(groupName, groupDetails['sophomorixType'])"> </input>
            </td>
        </tr>
    </table>
    <div class="panel panel-info">
        <div class="panel-heading">
            <a href="#" class="btn btn-default btn-flat pull-right" ng-click="showMemberDetails = ! showMemberDetails">{{showMemberDetails ? hidetext : showtext}}</a>
            <a class="btn btn-default btn-flat pull-right" ng:show="groupDetails['sophomorixType'] == 'project' && editMembersButton" href="#" ng-click="editGroupMembers(groupName, groupDetails, adminList, members)" translate >Edit members</a>
            <h4>
                <span translate> Group Members: </span>
                {{members.length}} <span translate>user(s) and </span>
                {{groupmemberlist.length}} <span translate>group(s).</span>
            </h4>
        </div>
        <div ng-show="showMemberDetails" class="panel-body">
            <h4 translate>Members</h4>
            <ul ng:if="members.length > 0" class="list-unstyled" style="column-width:300px;padding:0;">
                <li ng:repeat="member in members|orderBy :['sophomorixAdminClass','sn']" class="cardlist">
                    {{member.sn}} {{member.givenName}}
                    <span style="position:absolute;right:50px;">{{member.sophomorixAdminClass}}</span>
                    <i class="fas fa-trash pull-right" ng:click="removeMember(member)"></i>
                    <i class="fas fa-arrow-up pull-right" ng:click="elevateMember(member)"></i>
                </li>
            </ul>
            <span ng:if="members.length == 0" translate class="cardlist">No member</span>
            <h4 translate>Groups</h4>
            <ul ng:if="groupmemberlist.length > 0" class="list-unstyled" style="column-width:300px;padding:0;">
                <li ng:repeat="group in groupmemberlist" class="cardlist">
                    {{group}}
                    <i class="fas fa-trash pull-right" ng:click="removeMemberGroup(group)"></i>
                    <i class="fas fa-arrow-up pull-right" ng:click="elevateGroup(group)"></i>
                </li>
            </ul>
            <span ng:if="groupmemberlist.length == 0" translate class="cardlist">No group</span>
        </div>
    </div>
    <div class="panel panel-danger">
        <div class="panel-heading">
            <a href="#" class="btn btn-default btn-flat pull-right" ng-click="showAdminDetails = ! showAdminDetails">{{showMemberDetails ? hidetext : showtext}}</a>
            <h4>
                <span translate> Group Admins: </span>
                {{admins.length}} <span translate>user(s) and </span>
                {{groupadminlist.length}} <span translate>group(s).</span>
            </h4> 
        </div>
        <div ng-show="showAdminDetails" class="panel-body">
            <h4 translate>Admins</h4>
            <ul ng:if="admins.length > 0" class="list-unstyled" style="column-width:300px;padding:0;">
                <li ng:repeat="admin in admins|orderBy :['sophomorixAdminClass','sn']" class="cardlist">
                    {{admin.sn}} {{admin.givenName}}
                    <span style="position:absolute;right:50px;">{{admin.sophomorixAdminClass}}</span>
                    <i class="fas fa-trash pull-right" ng:click="removeAdmin(admin)"></i>
                    <i class="fas fa-arrow-down pull-right" ng:click="demoteMember(admin)"></i>
                </li>
            </ul>
            <span ng:if="admins.length == 0" translate class="cardlist">No admin</span>
            <h4 translate>Groups</h4>
            <ul ng:if="groupadminlist.length > 0" class="list-unstyled" style="column-width:300px;padding:0;">
                <li ng:repeat="group in groupadminlist" class="cardlist">
                    {{group}}
                    <i class="fas fa-trash pull-right" ng:click="removeAdminGroup(group)"></i>
                    <i class="fas fa-arrow-down pull-right" ng:click="demoteGroup(group)"></i>
                </li>
            </ul>
            <span ng:if="groupadminlist.length == 0" translate class="cardlist">No group</span>
        </div>
    </div>
    <dialog ng:show="UserSearchVisible">
        <div class="modal-header">
            <h3 class="modal-title" translate>Add member or group</h3>
        </div>
        <div class="modal-body">
            <h4>Search for user</h4>
            <input type="text" placeholder="Search for student or teacher" ng:model="$parent._.addMember" typeahead-editable="false" typeahead-min-length="3" uib-typeahead="user as user.label for user in findUsers($viewValue)" class="form-control" autofocus />
            <h4>Search for student in class</h4>
            <input type="text" placeholder="Please write the complete classname" ng:model="$parent._.addMember" typeahead-editable="false" typeahead-min-length="2" uib-typeahead="user as user.label for user in findUsersGroup($viewValue)" class="form-control" autofocus />
            <h4>Search for group</h4>
            <input type="text" placeholder="Search for groupname" ng:model="$parent._.addGroup" typeahead-editable="false" typeahead-min-length="2" uib-typeahead="user for user in findGroups($viewValue)" class="form-control" autofocus />
        </div>
        <div class="modal-footer">
            <input type="checkbox" ng:model="$parent._.addasadmin"> </input><span>Add as admin</span>
            <a ng:click="$parent.UserSearchVisible = false" class="btn btn-default btn-flat" translate>
                Close
            </a>
        </div>
    </dialog>
    <br />
    <br />


    <div class="modal-footer">
        <a class="btn btn-default btn-flat pull-left" ng:show="groupDetails['sophomorixType'] == 'project' && editMembersButton" ng-click="killProject(groupName)" translate >Delete Project</a>
        <a class="btn btn-default btn-flat pull-right" ng:click="close()" translate>Close</a>
        <a class="btn btn-default btn-flat pull-right" ng:click="UserSearchVisible = true" translate>Add member</a>
    </div>
</div>
