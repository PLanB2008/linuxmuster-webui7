<br/>

<progress-spinner ng:show="settings == null"></progress-spinner>

<div ng:show="settings != null">
    <uib:tabset>
        <uib:tab heading="{{'Teachers'|translate}}">
            <br/>
            <div ng:show="!non_default.teacher" class="alert alert-info" translate>There is no special quota here.</div>
            <table ng:show="non_default.teacher" class="lm-table lm-table-padded">
                <tr>
                    <th translate>Name</th>
                    <th ng:repeat="qt in quota_types">
                        {{qt.name}}<br />
                        <span translate>Default: </span>
                        <span style="font-weight:bold;color:#dc3545;" >{{settings['role.teacher'][qt.type]}}</span>
                    </th>
                    <th></th> <!-- Column for remove -->
                </tr>
                <tr ng:repeat="(login,details) in non_default.teacher">
                    <td>
                        {{details.displayName}}
                    </td>
                    <td ng:repeat="qt in quota_types">
                        <input type="number" ng:model="details.QUOTA[qt.type]" class="form-control"  ng:class="{'nondefault': isDefaultQuota('role.teacher', qt.type, details.QUOTA[qt.type])}" ng:disabled="qt.type == 'cloudquota_percentage'" ng:change="userToChange('teacher', login, qt.type)" />
                    </td>
                    <td>
                        <button class="btn btn-default" ng:click="remove('teacher', login)" title="Remove">
                                <i class="fa fa-trash-o"></i>
                        </button>
                    </td>
                </tr>
            </table>
            <hr />
            <h4 translate>Add special quota</h4>
            <input type="text" placeholder="{{searchText}}" ng:model="_.addNewSpecial" typeahead-editable="false" typeahead-min-length="3" uib-typeahead="user as user.label for user in findUsers($viewValue, 'teacher')" class="form-control" />
        </uib:tab>
        <uib:tab heading="{{'Students'|translate}}">
            <br/>
            <div ng:show="!non_default.student" class="alert alert-info" translate>There is no special quota here.</div>
            <table  ng:show="non_default.student" class="lm-table lm-table-padded">
                <tr>
                    <th translate>Name (login)</th>
                    <th ng:repeat="qt in quota_types">
                        {{qt.name}}<br />
                        <span translate>Default: </span>
                        <span style="font-weight:bold;color:#dc3545;" >{{settings['role.student'][qt.type]}}</span>
                    </th>
                    <th></th> <!-- Column for remove -->
                </tr>
                <tr ng:repeat="(login,details) in non_default.student">
                    <td>{{details.displayName}} ({{login}})</td>
                    <td ng:repeat="qt in quota_types">
                        <input type="number" ng:model="details.QUOTA[qt.type]" class="form-control"  ng:class="{'nondefault': isDefaultQuota('role.student', qt.type, details.QUOTA[qt.type])}" ng:disabled="qt.type == 'cloudquota_percentage'" ng:change="userToChange('student', login, qt.type)" />
                    </td>
                    <td>
                        <button class="btn btn-default" ng:click="remove('student', login)" title="Remove">
                                <i class="fa fa-trash-o"></i>
                        </button>
                    </td>
                </tr>
            </table>
            <hr />
            <h4 translate>Add special quota</h4>
            <input type="text" placeholder="{{searchText}}" ng:model="_.addNewSpecial" typeahead-editable="false" typeahead-min-length="3" uib-typeahead="user as user.label for user in findUsers($viewValue, 'student') " class="form-control" />
        </uib:tab>
        <uib:tab heading="{{'Schooladmins'|translate}}">
            <br/>
            <div ng:show="!non_default.schooladministrator" class="alert alert-info" translate>There is no special quota here.</div>
            <table  ng:show="non_default.schooladministrator" class="lm-table lm-table-padded">
                <tr>
                    <th translate>Name</th>
                    <th ng:repeat="qt in quota_types">
                        {{qt.name}}<br />
                        <span translate>Default: </span>
                        <span style="font-weight:bold;color:#dc3545;" >{{settings['role.schooladministrator'][qt.type]}}</span>
                    </th>
                    <th></th> <!-- Column for remove -->
                </tr>
                <tr ng:repeat="(login,details) in non_default.schooladministrator">
                    <td>
                        {{details.displayName}}
                    </td>
                    <td ng:repeat="qt in quota_types">
                        <input type="number" ng:model="details.QUOTA[qt.type]" class="form-control"  ng:class="{'nondefault': isDefaultQuota('role.schooladministrator', qt.type, details.QUOTA[qt.type])}" ng:disabled="qt.type == 'cloudquota_percentage'" ng:change="userToChange('schooladministrator', login, qt.type)" />
                    </td>
                    <td>
                        <button class="btn btn-default" ng:click="remove('schooladministrator', login)" title="Remove">
                                <i class="fa fa-trash-o"></i>
                        </button>
                    </td>
                </tr>
            </table>
            <hr />
            <h4 translate>Add special quota</h4>
            <input type="text" placeholder="{{searchText}}" ng:model="_.addNewSpecial" typeahead-editable="false" typeahead-min-length="3" uib-typeahead="user as user.label for user in findUsers($viewValue, 'schooladministrator')" class="form-control" />
        </uib:tab>
<!--
        <uib:tab heading="{{'Classes'|translate}}">
            <br/>
            <table class="lm-table lm-table-padded">
                <tr>
                    <th translate>Name</th>
                    <th>Default</th>
                    <th translate>Mail</th>
                </tr>
                <tr ng:repeat="class in classes">
                    <td>
                        {{class.name}}
                    </td>
                    <td>
                        <input type="number" ng:model="class.quota" class="form-control" />
                    </td>
                    <td>
                        <input type="number" ng:model="class.mailquota" class="form-control" />
                    </td>
                </tr>
            </table>
        </uib:tab>
        <uib:tab heading="{{'Projects'|translate}}">
            <br/>
            <table class="lm-table lm-table-padded">
                <tr>
                    <th translate>Name</th>
                    <th>Default</th>
                    <th>Mail</th>
                </tr>
                <tr ng:repeat="project in projects">
                    <td>
                        {{project.name}}
                    </td>
                    <td>
                        <input type="number" ng:model="project.quota" class="form-control" />
                    </td>
                    <td>
                        <input type="number" ng:model="project.mailquota" class="form-control" />
                    </td>
                </tr>
            </table>
        </uib:tab>
-->
    </uib:tabset>

    <div class="floating-toolbar-padder"></div>

    <floating-toolbar>
<!--
        <button ng:click="backups()" class="btn btn-default btn-flat pull-right"><i class="fa fa-history"></i></button>
        <button ng:click="save()" class="btn btn-default btn-flat" translate>Save</button>
-->
        <button ng:click="saveApply()" class="btn btn-default btn-flat" translate>Save & apply</button>
    </floating-toolbar>
</div>
