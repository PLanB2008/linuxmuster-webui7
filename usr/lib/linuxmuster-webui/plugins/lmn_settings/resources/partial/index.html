<br/>

<progress-spinner ng:show="settings == null"></progress-spinner>

<div ng:show="settings != null">
    <uib:tabset>

    <uib:tab heading="{{'General'|translate}}">
    <br/>

    <h3 translate>General</h3>
    <table class="lm-table lm-table-padded">
        <tr>
            <td width=25%>
                <label translate>Schoolname</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.school.school_longname" />
            </td>
        </tr>
    </table>

    <h3 translate>Email Domain</h3>
    <table class="lm-table lm-table-padded">
        <tr>
            <td width=25%>
                <label translate>Role Students</label>
            </td>
            <td>
                <input type="text" class="form-control" placeholder="{{'e.g.: @linuxmuster.net'|translate}}" ng:model="settings['role.student']['maildomain']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Role Teachers</label>
            </td>
            <td>
                <input type="text" class="form-control" placeholder="{{'e.g.: @linuxmuster.net'|translate}}" ng:model="settings['role.teacher']['maildomain']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Primary Group Adminclass</label>
            </td>
            <td>
                <input type="text" class="form-control" placeholder="{{'e.g.: @linuxmuster.net'|translate}}" ng:model="settings['type.adminclass']['maildomain']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Primary Group Teacherclass</label>
            </td>
            <td>
                <input type="text" class="form-control" placeholder="{{'e.g.: @linuxmuster.net'|translate}}" ng:model="settings['type.teacherclass']['maildomain']" />
            </td>
        </tr>
    </table>

    </uib:tab>

    <uib:tab heading="{{'Listimport'|translate}}">
    <br/>
    <h3 translate>Username and Passwords</h3>
    <table class="lm-table lm-table-padded">
        <tr>
            <th width="40%"></th>
            <th translate>Students</th>
            <th translate>Teachers</th>
            <th translate>extrastudents</th>
        </tr>
        <tr>
            <td>
                <label translate>Reverse Surname and Firstname in username</label>
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.students.csv']['surname_firstname_reverse=boolean']" />
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.teachers.csv']['surname_firstname_reverse=boolean']" />
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.extrastudents.csv']['surname_firstname_reverse=boolean']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Surname Characters</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['surname_chars']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['surname_chars']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['surname_chars']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Firstname Chars</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['firstname_chars']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['firstname_chars']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['firstname_chars']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Password Length</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['pwd_length']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['pwd_length']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['pwd_length']" />
            </td>
        </tr>
        <tr ng:show="settings.lehrer_zufall_passwort || settings.schueler_zufall_passwort" >
            <td>
                <label translate>Password length</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['pwd_length']"  />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['pwd_length']" ng:show="settings.schueler_zufall_passwort" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['pwd_length']" ng:show="settings.schueler_zufall_passwort" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Random password</label>
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.students.csv']['random_pwd']" />
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.teachers.csv']['random_pwd']" />
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.extrastudents.csv']['random_pwd']" />
            </td>

        </tr>
        <tr>
            <td>
                <label translate>Tolerance after departure (days)</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['toleration_time']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['toleration_time']">
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['toleration_time']">
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Removal after departure (days)</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.students.csv']['deactivation_time']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.teachers.csv']['deactivation_time']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['userfile.extrastudents.csv']['deactivation_time']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Replace slash(/) in classname by hypen(-)</label>
            </td>
            <td>
                <span checkbox ng:model="settings['userfile.students.csv']['CLASSNAME_SLASH_TO_HYPHEN']" />
            </td>
            <td>
            </td>
            <td>
            </td>
        </tr>
    </table>
    <h3 translate>Encoding</h3>
    <table class="lm-table lm-table-padded">
        <tr>
            <th width="40%"></th>
            <th translate>students.csv encoding</th>
            <th translate>teachers.csv encoding</th>
            <th translate>extrastudents.csv encoding</th>
            <!--<th translate>extraclasses.csv encoding</th>-->
        </tr>
        <tr>
            <td>
                <label translate>List encoding</label>
            </td>
            <td>
                <select class="form-control" ng:model="settings['userfile.students.csv']['encoding']" ng:options="x for x in encodings" />
                    <div ng:show="settings['userfile.students.csv']['encoding'] == 'auto'" >
            </td>
            <td>
                <select class="form-control" ng:model="settings['userfile.teachers.csv']['encoding']" ng:options="x for x in encodings" />
                    <div ng:show="settings['userfile.teachers.csv']['encoding'] == 'auto'" >
            </td>
            <td>
                <select class="form-control" ng:model="settings['userfile.extrastudents.csv']['encoding']" ng:options="x for x in encodings" />
                    <div ng:show="settings['userfile.extrastudents.csv']['encoding'] == 'auto'" >
            </td>
            <!--<td>
                <select class="form-control" ng:model="settings['userfile.extraclasses.csv']['encoding']" ng:options="x for x in encodings" />
                    <div ng:show="settings['userfile.extraclasses.csv']['encoding'] == 'auto'" >
            </td>-->
        </tr>
        <tr>
            <td>
                <label translate>Detected encoding</label>
            </td>
            <td>
                {{encoding['userfile.students.csv']}}
            </td>
            <td>
                {{encoding['userfile.teachers.csv']}}
            </td>
            <td>
                {{encoding['userfile.extrastudents.csv']}}
            </td>
            <!--<td>
                {{encoding['userfile.extraclasses.csv']}}
            </td>-->
        </tr>
    </table>

    </uib:tab>


    </uib:tab>
    <uib:tab heading="{{'Quota'|translate}}">
    <br/>
    <h3 translate>Quota </h3>
    <table class="lm-table lm-table-padded">
        <tr>
            <th width="40%"></th>
            <th translate>Students</th>
            <th translate>Teachers</th>
            <th translate>Schooladministrator</th>
        </tr>
        <tr>
            <td>
                <label translate>Quota Default Global in MiB</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.student']['quota_default_global']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.teacher']['quota_default_global']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.schooladministrator']['quota_default_global']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Quota Default School in MiB</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.student']['quota_default_school']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.teacher']['quota_default_school']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.schooladministrator']['quota_default_school']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Cloudquota Percentage</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.student']['cloudquota_percentage']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.teacher']['cloudquota_percentage']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.schooladministrator']['cloudquota_percentage']" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Mailquota Default in MiB</label>
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.student']['mailquota_default']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.teacher']['mailquota_default']" />
            </td>
            <td>
                <input type="number" class="form-control" ng:model="settings['role.schooladministrator']['mailquota_default']" />
            </td>
        </tr>
    </table>



    </uib:tab>
    <uib:tab heading="{{'Printing data'|translate}}">
    <h3 translate>Password printing data</h2>
    <br/>

    <table class="lm-table lm-table-padded">
        <tr>
            <td width=25%>
                <label translate>School name</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.school.school_longname" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Internal FQDN for printing</label>
            <td>
                <input type="text" class="form-control" ng:model="settings.server_fqdn_internal_print" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>External FQDN for printing</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.server_fqdn_external_print" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Samba domain for printing</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.smb_domain_print" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>MOODLE URL</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.moodle_url" />
            </td>
        </tr>
        <tr>
            <td>
                <label translate>Admin e-mail</label>
            </td>
            <td>
                <input type="text" class="form-control" ng:model="settings.admins_print" />
            </td>
        </tr>
    </table>

    </uib:tab>
    </uib:tabset>


    <div class="floating-toolbar-padder"></div>

    <floating-toolbar>
        <button ng:click="backups()" class="btn btn-default btn-flat pull-right"><i class="fa fa-history"></i></button>
        <button ng:click="save()" class="btn btn-default btn-flat" translate>Save</button>
        <button ng:click="saveAndCheck()" class="btn btn-default btn-flat" translate>Save &amp; check</button>
    </floating-toolbar>
</div>
